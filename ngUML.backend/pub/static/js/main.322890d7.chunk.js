(this["webpackJsonpnguml.editor"]=this["webpackJsonpnguml.editor"]||[]).push([[0],{112:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(0),r=n.n(o),i=n(11),a=n.n(i),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,171)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),o(e),r(e),i(e)}))},l=n(6),d=r.a.createContext(void 0),j=function(e){var t=e.children,n=r.a.useState(!0),o=Object(l.a)(n,2),i=o[0],a=o[1],s=r.a.useState(1),j=Object(l.a)(s,2),u=j[0],b=j[1],O=r.a.useState(),f=Object(l.a)(O,2),h=f[0],x=f[1],m=r.a.useState((new Date).getTime()),p=Object(l.a)(m,2),g=p[0],y=p[1];return Object(c.jsx)(d.Provider,{value:{scale:u,setScale:b,panning:i,setPanning:a,focus:h,setFocus:x,redraw:g,setRedraw:y},children:t})},u=d,b=n(8),O=n(3),f=n(168),h=n(45),x=n.n(h),m=r.a.createContext(void 0),p=function(e){var t=e.children,n=r.a.useState({}),o=Object(l.a)(n,2),i=o[0],a=o[1],s=r.a.useState({}),d=Object(l.a)(s,2),j=d[0],u=d[1],h=r.a.useState(!1),p=Object(l.a)(h,2),g=p[0],y=p[1],v=r.a.useState((new Date).getTime()),C=Object(l.a)(v,2),w=C[0],k=C[1],N=r.a.useState({root:r.a.useRef(document.getElementById("root"))}),S=Object(l.a)(N,2),F=S[0],R=S[1],T=r.a.useState({}),E=Object(l.a)(T,2),B=E[0],L=E[1],M=r.a.useState({}),A=Object(l.a)(M,2),D=A[0],P=A[1];return Object(c.jsx)(m.Provider,{value:{nodes:i,setNodes:a,copyNode:function(e){var t=JSON.parse(JSON.stringify(i[e]));a(Object(O.a)(Object(O.a)({},i),{},Object(b.a)({},f.a(),Object(O.a)(Object(O.a)({},t),{},{position:{x:t.position.x+32,y:t.position.y+32}}))))},deleteNode:function(e){var t=i;delete t[e];var n=F;delete n[e];var c=B;Object.keys(B).forEach((function(t){(B[t].from===e||B[t].to===e)&&delete B[t]})),a(Object(O.a)({},t)),R(Object(O.a)({},n)),L(Object(O.a)({},c))},addNode:function(e){a(Object(O.a)(Object(O.a)({},i),{},Object(b.a)({},f.a(),{name:"newNode",type:e,position:{x:128,y:128},data:{},instances:{}})))},moveNode:function(e,t,n){a(Object(O.a)(Object(O.a)({},i),{},Object(b.a)({},e,Object(O.a)(Object(O.a)({},i[e]),{},{position:{x:t,y:n}}))))},references:F,addRef:function(e,t){R(Object(O.a)(Object(O.a)({},F),{},Object(b.a)({},e,t)))},connections:B,setConnections:L,importedNodes:j,importedConnections:D,importData:function(){fetch("https://model.nguml.com/model/data").then((function(e){return e.json()})).then((function(e){var t,n,c,o;u(null!==(t=e.nodes)&&void 0!==t?t:{}),a(null!==(n=JSON.parse(JSON.stringify(e.nodes)))&&void 0!==n?n:{}),P(null!==(c=e.connections)&&void 0!==c?c:{}),L(null!==(o=JSON.parse(JSON.stringify(e.connections)))&&void 0!==o?o:{})}))},writeData:function(e,t,n){fetch("https://model.nguml.com/model/data",{method:"POST",mode:"no-cors",body:JSON.stringify({nodes:i,connections:B,changes:e})}).then((function(e){return t(!0)}),(function(e){return n(!0)}))},layout:g,autoLayout:function(){y(!0);var e=Object.keys(i).map((function(e){return{group:"nodes",data:{id:e}}})),t=Object.keys(B).map((function(e){return{group:"edges",data:{id:e,source:B[e].from,target:B[e].to}}})),n=x()({headless:!0});n.add(e),n.add(t);var c=n.layout({name:"cose"});c.on("layoutstop",(function(){Object.keys(i).forEach((function(e){var t=n.$id(e).position();a(Object(O.a)(Object(O.a)({},i),{},Object(b.a)({},e,Object(O.a)(Object(O.a)({},i[e]),{},{position:{x:6*t.x,y:4*t.y}})))),setTimeout((function(){return k((new Date).getTime())}),50),y(!1)}))})),c.run()},forceRefresh:w},children:t})},g=m,y=(n(112),function(){return Object(c.jsx)(j,{children:Object(c.jsxs)(p,{children:[Object(c.jsx)(M,{}),Object(c.jsx)(_,{}),Object(c.jsx)(X,{}),Object(c.jsx)(xe,{})]})})}),v=n(158),C=n(159),w=n(160),k=n(161),N=n(166),S=n(13),F=n.n(S),R=function(e,t,n){var c,o=[];return F.a.differenceWith(n,t,F.a.isEqual).forEach((function(n){n&&n.id?t.filter((function(e){return e.id===n.id}))[0].type!==n.type?(o.push({type:"retype-method",from:e,to:n}),c.push(n.id)):o.push({type:"new-method",from:e,to:n}):n&&o.push({type:"new-method",from:e,to:n})})),F.a.differenceWith(t,n,F.a.isEqual).forEach((function(t){t&&c.indexOf(t.id)&&o.push({type:"delete-method",from:e,to:t})})),o},T=function(e,t,n){var c=[],o=[];return console.log(n),console.log(t),F.a.differenceWith(n,t,F.a.isEqual).forEach((function(n){n&&n.id?t.filter((function(e){return e.id===n.id}))[0].type!==n.type?(c.push({type:"retype-property",from:e,to:n}),o.push(n.id)):c.push({type:"new-property",from:e,to:n}):n&&c.push({type:"new-property",from:e,to:n})})),F.a.differenceWith(t,n,F.a.isEqual).forEach((function(t){t&&o.indexOf(t.id)<0&&c.push({type:"delete-property",from:e,to:t})})),c},E=function(e,t){var n=function(e,t){var n=Object.keys(t).filter((function(t){return!e[t]})).map((function(e){var n=[];return n.push({type:"new-classifier",from:null,to:t[e],nodeKey:e}),(n=n.concat(T(t[e],[],t[e].data.properties))).concat(R(t[e],[],t[e].data.methods))})),c=[];return n.forEach((function(e){e&&(c=c.concat(e))})),c.filter((function(e){return e}))}(e,t),c=function(e,t){var n=Object.keys(t).filter((function(t){return e[t]})).map((function(n){var c=[e[n],t[n]],o=[];return c[0].data.properties&&(o=o.concat(T(t[n],c[0].data.properties,c[1].data.properties))),c[0].data.methods&&(o=o.concat(R(t[n],c[0].data.methods,c[1].data.methods))),o})),c=[];return n.forEach((function(e){e&&(c=c.concat(e))})),c.filter((function(e){return e}))}(e,t);return[].concat(n,c)},B=function(e,t,n){var c=function(e,t,n){var c=Object.keys(n).filter((function(e){return!t[e]})).map((function(t){var c=[];return c.push({type:"new-connection",from:[e[n[t].from].name,e[n[t].to].name],to:n[t]}),c})),o=[];return c.forEach((function(e){e&&(o=o.concat(e))})),o.filter((function(e){return e}))}(e,t,n),o=function(e,t){var n=[],c=Object.keys(t).filter((function(t){return e[t]})).filter((function(n){return!F.a.isEqual(t[n],e[n])})).map((function(c){var o=[],r=[e[c],t[c]];return r[0].label!==r[1].label&&(o.push({type:"connection-rename",from:c,to:r[1].label}),n.push(r[1].id)),r[0].from===r[1].to&&(o.push({type:"connection-mirror",from:c,to:r[1].from}),n.push(r[1].id)),r[0].labelFrom!==r[1].labelFrom&&(o.push({type:"connection-cardinality-from",from:c,to:r[1].labelFrom}),n.push(r[1].id)),r[0].labelTo!==r[1].labelTo&&(o.push({type:"connection-cardinality-to",from:c,to:r[1].labelTo}),n.push(r[1].id)),r[0].type!==r[1].type&&(o.push({type:"connection-retype",from:c,to:r[0].type}),n.push(r[1].id)),o})),o=[];return c.forEach((function(e){e&&(o=o.concat(e))})),Object.keys(e).filter((function(e){return!t[e]})).forEach((function(t){var c=e[t];n.indexOf(c.id)<0&&o.push({type:"delete-connection",from:t,to:{id:c.id}})})),o.filter((function(e){return e}))}(t,n);return[].concat(c,o)},L=function(){var e=r.a.useContext(g),t=e.importedNodes,n=e.importedConnections,o=e.nodes,i=e.connections,a=e.writeData,s=r.a.useMemo((function(){return E(t,o)}),[o,t]),d=r.a.useMemo((function(){return B(o,n,i)}),[o,i,n]),j=r.a.useState(!1),u=Object(l.a)(j,2),b=u[0],f=u[1],h=r.a.useState(!1),x=Object(l.a)(h,2),m=x[0],p=x[1],y=r.a.useState(!1),v=Object(l.a)(y,2),C=v[0],w=v[1];return Object(c.jsxs)("div",{style:{padding:22},children:[Object(c.jsxs)(N.h,{style:{width:"100%"},striped:!0,interactive:!0,children:[Object(c.jsxs)("thead",{children:[Object(c.jsx)("th",{}),Object(c.jsx)("th",{children:"Change"}),Object(c.jsx)("th",{children:"Container"}),Object(c.jsx)("th",{children:"Data"}),Object(c.jsx)("th",{})]}),Object(c.jsxs)("tbody",{children:[Object.keys(s).map((function(e,t){return"new-classifier"===s[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"new-object"})}),Object(c.jsx)("td",{children:"Add Class"}),Object(c.jsx)("td",{children:"-"}),Object(c.jsx)("td",{children:s[t].to.name}),Object(c.jsx)("td",{})]}):"delete-property"===s[t].type?Object(c.jsxs)("tr",{style:{backgroundColor:Object.keys(s[t].from.instances).length?"red":""},children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"remove-row-bottom"})}),Object(c.jsx)("td",{children:"Delete Property"}),Object(c.jsx)("td",{children:s[t].from.name}),Object(c.jsxs)("td",{children:["+",s[t].to.name," : ",s[t].to.type]}),Object(c.jsx)("td",{children:Object.keys(s[t].from.instances).length?Object(c.jsx)(N.i,{icon:"warning-sign",intent:"danger"}):Object(c.jsx)(c.Fragment,{})})]}):"new-property"===s[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"add-row-bottom"})}),Object(c.jsx)("td",{children:"Add Property"}),Object(c.jsx)("td",{children:s[t].from.name}),Object(c.jsxs)("td",{children:["+",s[t].to.name," : ",s[t].to.type]}),Object(c.jsx)("td",{})]}):"delete-method"===s[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"publish-function"})}),Object(c.jsx)("td",{children:"Delete Method"}),Object(c.jsx)("td",{children:s[t].from.name}),Object(c.jsxs)("td",{children:[s[t].to.name,"() : ",s[t].to.type]}),Object(c.jsx)("td",{})]}):"new-method"===s[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"function"})}),Object(c.jsx)("td",{children:"Add Method"}),Object(c.jsx)("td",{children:s[t].from.name}),Object(c.jsxs)("td",{children:[s[t].to.name,"() : ",s[t].to.type]}),Object(c.jsx)("td",{})]}):"retype-method"===s[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"function"})}),Object(c.jsx)("td",{children:"Retype Method"}),Object(c.jsx)("td",{children:s[t].from.name}),Object(c.jsx)("td",{children:s[t].to.type}),Object(c.jsx)("td",{})]}):"retype-property"===s[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"exclude-row"})}),Object(c.jsx)("td",{children:"Retype Property"}),Object(c.jsx)("td",{children:s[t].from.name}),Object(c.jsxs)("td",{children:[s[t].to.name," -> ",s[t].to.type]}),Object(c.jsx)("td",{})]}):Object(c.jsx)(c.Fragment,{})})),Object.keys(d).map((function(e,t){return"new-connection"===d[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"new-link"})}),Object(c.jsx)("td",{children:"Add Connection"}),Object(c.jsx)("td",{children:o[d[t].to.from].name+" - "+o[d[t].to.to].name}),Object(c.jsx)("td",{children:d[t].to.labelFrom+" - "+d[t].to.label+" - "+d[t].to.labelTo}),Object(c.jsx)("td",{})]}):"connection-mirror"===d[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"refresh"})}),Object(c.jsx)("td",{children:"Mirror Connection"}),Object(c.jsx)("td",{children:o[i[d[t].from].to].name+" - "+o[i[d[t].from].from].name}),Object(c.jsx)("td",{children:o[i[d[t].from].from].name+" - "+o[i[d[t].from].to].name}),Object(c.jsx)("td",{})]}):"connection-rename"===d[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"tag"})}),Object(c.jsx)("td",{children:"Rename Connection"}),Object(c.jsx)("td",{children:o[i[d[t].from].from].name+" - "+o[i[d[t].from].to].name}),Object(c.jsx)("td",{children:d[t].to}),Object(c.jsx)("td",{})]}):"connection-cardinality-from"===d[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"asterisk"})}),Object(c.jsx)("td",{children:"Change Cardinality"}),Object(c.jsx)("td",{children:o[i[d[t].from].from].name+" - "+o[i[d[t].from].to].name}),Object(c.jsx)("td",{children:o[i[d[t].from].from].name+" : "+d[t].to}),Object(c.jsx)("td",{})]}):"connection-cardinality-to"===d[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"asterisk"})}),Object(c.jsx)("td",{children:"Change Cardinality"}),Object(c.jsx)("td",{children:o[i[d[t].from].from].name+" - "+o[i[d[t].from].to].name}),Object(c.jsx)("td",{children:o[i[d[t].from].to].name+" : "+d[t].to}),Object(c.jsx)("td",{})]}):"connection-retype"===d[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"wrench"})}),Object(c.jsx)("td",{children:"Retype Connection"}),Object(c.jsx)("td",{children:o[i[d[t].from].from].name+" - "+o[i[d[t].from].to].name}),Object(c.jsx)("td",{children:d[t].to[0].toUpperCase()+d[t].to.substring(1)+" -> "+i[d[t].from].type[0].toUpperCase()+i[d[t].from].type.substring(1)}),Object(c.jsx)("td",{})]}):"delete-connection"===d[t].type?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(N.i,{icon:"graph-remove"})}),Object(c.jsx)("td",{children:"Delete Connection"}),Object(c.jsx)("td",{children:o[n[d[t].from].from].name}),Object(c.jsx)("td",{children:"-"}),Object(c.jsx)("td",{})]}):Object(c.jsx)(c.Fragment,{children:d[t].type})}))]})]}),s.length||d.length?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N.c,{style:{padding:32},fill:!0,children:Object(c.jsx)(N.b,{onClick:function(){return f(!0)},intent:"primary",children:"Push to Backend"})}),Object(c.jsx)(N.a,{className:"bp3-dark",intent:"warning",confirmButtonText:"Yes",icon:"cloud-upload",cancelButtonText:"No",isOpen:b,onClose:function(){return f(!1)},onConfirm:function(){var e=[];e=(e=e.concat(s.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{key:e.from,from:o[e.from]})})))).concat(d.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{key:e.from,from:i[e.from]})}))),a(e,p,w)},children:"Are you sure you want to push the changes, this will overwrite the existing application structure and is an irreversible action."})]}):Object(c.jsxs)("div",{style:{margin:32,textAlign:"center",padding:32,fontSize:21},children:[Object(c.jsx)(N.i,{style:{marginRight:16},icon:"clean",intent:"success",iconSize:24}),"No changes to push"]}),Object(c.jsx)(N.a,{icon:"clean",className:"bp3-dark",intent:"success",isOpen:m,onClose:function(){return p(!1)},children:"Successfully pushed to backend!"}),Object(c.jsx)(N.a,{icon:"clean",className:"bp3-dark",intent:"danger",isOpen:C,onClose:function(){return w(!1)},children:"Couldn't push to backend!"})]})},M=function(e){var t=r.a.useContext(g),n=t.importData,o=t.references,i=t.autoLayout,a=r.a.useState(!1),s=Object(l.a)(a,2),d=s[0],j=s[1],u=r.a.useState(!1),b=Object(l.a)(u,2),O=b[0],f=b[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N.e,{isOpen:d,onClose:function(){return j(!1)},usePortal:!0,portalContainer:o.root.current,style:{zIndex:8085,height:"66vh"},className:"bp3-dark",position:"bottom",title:"Write to Backend",children:Object(c.jsx)(L,{})}),Object(c.jsx)(N.a,{isOpen:O,onClose:function(){return f(!1)},className:"bp3-dark",icon:"cloud-download",intent:"warning",onConfirm:function(){return n()},cancelButtonText:"Cancel",children:"This will forcefully overwrite everything in the current editor state. Are you sure?"}),Object(c.jsxs)(v.a,{"aria-label":"ngUML Editor",children:[Object(c.jsx)(C.a,{prefix:"ngUML",children:"Editor"}),Object(c.jsxs)(w.a,{"aria-label":"ngUML [Editor]",children:[Object(c.jsxs)(k.a,{onClick:function(){return f(!0)},children:[Object(c.jsx)(N.i,{icon:"cloud-download"}),"\xa0 Read from Backend"]}),Object(c.jsxs)(k.a,{onClick:function(){return j(!0)},children:[Object(c.jsx)(N.i,{icon:"cloud-upload"}),"\xa0 Push to Backend"]}),Object(c.jsxs)(k.a,{onClick:i,children:[Object(c.jsx)(N.i,{icon:"graph"}),"\xa0 Auto-Layout (CoSE)"]})]})]})]})},A=n(162),D=function(e){var t,n=e.node,o=r.a.useState("string"),i=Object(l.a)(o,2),a=i[0],s=i[1],d=r.a.useState(""),j=Object(l.a)(d,2),u=j[0],f=j[1],h=r.a.useContext(g),x=h.nodes,m=h.setNodes,p=null!==(t=x[n].data.methods)&&void 0!==t?t:[],y=function(e){m(Object(O.a)(Object(O.a)({},x),{},Object(b.a)({},n,Object(O.a)(Object(O.a)({},x[n]),{},{data:Object(O.a)(Object(O.a)({},x[n].data),{},{methods:e})}))))},v=function(e,t,n){p[e]&&("name"===t?(p[e].name=n,y(p)):"type"===t?(p[e].type=n,y(p)):"code"===t&&(p[e].code=n,y(p)))};return Object(c.jsxs)("div",{style:{padding:"8px 0",width:"100%",borderTop:"solid 1px #666"},children:[p.map((function(e,t){return e?Object(c.jsxs)("div",{style:{borderBottom:"solid 1px #666",margin:"8px"},children:[Object(c.jsxs)(N.d,{style:{margin:"2px 0 2px 0"},fill:!0,children:[Object(c.jsx)(N.j,{placeholder:"methodName",value:e.name,onChange:function(e){v(t,"name",e.target.value)}}),Object(c.jsx)(N.g,{options:["string","int","bool"],value:e.type,onChange:function(e){return v(t,"type",e.target.value)}}),Object(c.jsx)(N.b,{intent:"danger",icon:"delete",onClick:function(){return function(e){delete p[e],p.splice(e,1),y(p)}(t)}})]}),Object(c.jsx)(N.k,{fill:!0,style:{margin:"8px 0"},placeholder:"Code...",growVertically:!0,value:e.code,onChange:function(e){return v(t,"code",e.target.value)}})]}):Object(c.jsx)(c.Fragment,{})})),Object(c.jsx)("div",{style:{margin:"8px"},children:Object(c.jsxs)(N.d,{fill:!0,children:[Object(c.jsx)(N.j,{placeholder:"newMethod",value:u,onChange:function(e){return f(e.target.value)}}),Object(c.jsx)(N.g,{options:["string","int","bool"],value:a,onChange:function(e){return s(e.target.value)}}),Object(c.jsx)(N.b,{intent:"success",icon:"add",onClick:function(){return function(){if(a&&u){var e={name:u,type:a,code:""};p.push(e),y(p),f(""),s("string")}}()}})]})})]})},P=function(e){var t,n=e.node,o=r.a.useState("string"),i=Object(l.a)(o,2),a=i[0],s=i[1],d=r.a.useState(""),j=Object(l.a)(d,2),u=j[0],f=j[1],h=r.a.useContext(g),x=h.nodes,m=h.setNodes,p=null!==(t=x[n].data.properties)&&void 0!==t?t:[],y=function(e){m(Object(O.a)(Object(O.a)({},x),{},Object(b.a)({},n,Object(O.a)(Object(O.a)({},x[n]),{},{data:Object(O.a)(Object(O.a)({},x[n].data),{},{properties:e})}))))},v=function(e,t,n){p[e]&&("name"===t?(p[e].name=n,y(p)):"type"===t&&(p[e].type=n,y(p)))};return Object(c.jsxs)("div",{style:{margin:"8px",width:"100%",padding:"16px 0 0 0",borderTop:"solid 1px #666"},children:[p.map((function(e,t){return e?Object(c.jsx)("div",{style:{margin:"8px"},children:Object(c.jsxs)(N.d,{style:{margin:"2px 0 2px 0"},fill:!0,children:[Object(c.jsx)(N.j,{placeholder:"propertyName",value:e.name,onChange:function(e){v(t,"name",e.target.value)}}),Object(c.jsx)(N.g,{options:["string","int","bool"],value:e.type,onChange:function(e){return v(t,"type",e.target.value)}}),Object(c.jsx)(N.b,{intent:"danger",icon:"delete",onClick:function(){return function(e){delete p[e],p.splice(e,1),y(p)}(t)}})]})}):Object(c.jsx)(c.Fragment,{})})),Object(c.jsx)("div",{style:{margin:"8px"},children:Object(c.jsxs)(N.d,{fill:!0,style:{margin:"2px 0 2px 0"},children:[Object(c.jsx)(N.j,{placeholder:"newProperty",value:u,onChange:function(e){return f(e.target.value)}}),Object(c.jsx)(N.g,{options:["string","int","bool"],value:a,onChange:function(e){return s(e.target.value)}}),Object(c.jsx)(N.b,{intent:"success",icon:"add",onClick:function(){return function(){if(a&&u){var e={name:u,type:a};p.push(e),y(p),f(""),s("string")}}()}})]})})]})},z={fontFamily:"monospace",border:"solid",borderColor:"black",borderWidth:1,display:"block",backgroundColor:"white"},I={borderBottom:"solid",borderColor:"black",textAlign:"center",borderWidth:1,paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8},J={display:"flex",flexDirection:"column",borderBottom:"solid",borderColor:"black",borderWidth:1,paddingTop:8,paddingLeft:8,paddingRight:8,paddingBottom:8,textAlign:"left",lineHeight:1.5},W=function(e){var t,n,o=e.node,r=e.style,i=e.className,a=null!==(t=o.data.properties)&&void 0!==t?t:[],s=null!==(n=o.data.methods)&&void 0!==n?n:[];return Object(c.jsxs)("div",{style:Object(O.a)(Object(O.a)({},z),r),className:i,children:[Object(c.jsx)("div",{style:I,children:o.name}),Object(c.jsx)("div",{style:J,children:a.map((function(e,t){return e?Object(c.jsxs)("span",{className:"nguml-class-property",children:["+",e.name," : ",e.type]},t):Object(c.jsx)(c.Fragment,{})}))}),Object(c.jsx)("div",{style:J,children:s.map((function(e,t){return e?Object(c.jsxs)("span",{className:"nguml-class-method",children:[e.name,"() : ",e.type]},t):Object(c.jsx)(c.Fragment,{})}))})]})},H=function(e){var t=e.connectionId,n=e.connection,o=e.connections,i=e.setConnections,a=e.fromNode,s=e.toNode,d=r.a.useState(!1),j=Object(l.a)(d,2),u=j[0],f=j[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"nguml-context-connection-item",children:[Object(c.jsx)("div",{style:{transform:"scale(0.7)",transformOrigin:"left"},children:Object(c.jsx)(W,{node:a})}),Object(c.jsx)(N.f,{value:n.label,onChange:function(e){i(Object(O.a)(Object(O.a)({},o),{},Object(b.a)({},t,Object(O.a)(Object(O.a)({},n),{},{label:e}))))}}),Object(c.jsx)("div",{style:{transform:"scale(0.7)",transformOrigin:"right"},children:Object(c.jsx)(W,{node:s})})]}),Object(c.jsx)("div",{className:"nguml-context-connection-options",children:Object(c.jsxs)(N.d,{fill:!0,children:[Object(c.jsx)(N.b,{intent:"primary",icon:"refresh",onClick:function(){i(Object(O.a)(Object(O.a)({},o),{},Object(b.a)({},t,Object(O.a)(Object(O.a)({},n),{},{from:n.to,to:n.from,labelFrom:n.labelTo,labelTo:n.labelFrom}))))}}),Object(c.jsx)(N.g,{options:["1","*"],value:n.labelFrom,onChange:function(e){i(Object(O.a)(Object(O.a)({},o),{},Object(b.a)({},t,Object(O.a)(Object(O.a)({},n),{},{labelFrom:e.target.value}))))}}),Object(c.jsx)(N.g,{options:[{label:"Generalization",value:"generalization"},{label:"Association",value:"association"},{label:"Composition",value:"composition"}],value:n.type,onChange:function(e){i(Object(O.a)(Object(O.a)({},o),{},Object(b.a)({},t,Object(O.a)(Object(O.a)({},n),{},{type:e.target.value}))))}}),Object(c.jsx)(N.g,{options:["1","*"],value:n.labelTo,onChange:function(e){i(Object(O.a)(Object(O.a)({},o),{},Object(b.a)({},t,Object(O.a)(Object(O.a)({},n),{},{labelTo:e.target.value}))))}}),Object(c.jsx)(N.b,{intent:"danger",icon:"delete",onClick:function(){return f(!0)}}),Object(c.jsx)(N.a,{className:"bp3-dark",intent:"danger",confirmButtonText:"Yes",icon:"delete",cancelButtonText:"No",isOpen:u,onClose:function(){return f(!1)},onConfirm:function(){var e=Object(O.a)({},o);delete e[t],i(e)},children:"Are you sure you want to delete the connection, this is an irreversible action."})]})})]})},Y=function(e){var t=e.node,n=r.a.useContext(g),o=n.nodes,i=n.connections,a=n.setConnections,s=r.a.useState([]),d=Object(l.a)(s,2),j=d[0],u=d[1],h=r.a.useState(""),x=Object(l.a)(h,2),m=x[0],p=x[1],y=r.a.useState(""),v=Object(l.a)(y,2),C=v[0],w=v[1];r.a.useEffect((function(){var e=Object.keys(o).filter((function(e){return e!==t}));u(e.map((function(e,t){return{label:o[e].name,value:e}})))}),[o,t,i]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"nguml-context-connection",children:[Object(c.jsx)("div",{children:Object.keys(i).map((function(e,n){if(i[e].from===t||i[e].to===t){var r=i[e];return Object(c.jsx)(H,{connectionId:e,connection:r,fromNode:o[r.from],toNode:o[r.to],connections:i,setConnections:a})}return Object(c.jsx)(c.Fragment,{children:null})}))}),j.length>0?Object(c.jsxs)(N.d,{fill:!0,children:[Object(c.jsx)(N.g,{options:j,value:m,onChange:function(e){return p(e.target.value)}}),Object(c.jsx)(N.g,{options:[{label:"Generalization",value:"generalization"},{label:"Association",value:"association"},{label:"Composition",value:"composition"}],value:C,onChange:function(e){return w(e.target.value)}}),Object(c.jsx)(N.b,{intent:"success",icon:"link",onClick:function(){return function(){var e=""!==C?C:"generalization",n=function(){return"generalization"===e?{from:"*",to:"*"}:"composition"===e||"composition"===e?{from:"1",to:"*"}:{from:"1",to:"1"}},c={name:"",type:""!==C?C:"generalization",from:t,to:""!==m?m:String(j[0].value),label:"Connection",labelFrom:n().from,labelTo:n().to};a(Object(O.a)(Object(O.a)({},i),{},Object(b.a)({},f.a(),c))),p(""),w("")}()}})]}):Object(c.jsx)(c.Fragment,{})]})})},q=function(e){var t=e.instances;return Object(c.jsx)("div",{style:{padding:16,width:"100%"},children:Object(c.jsxs)(N.h,{interactive:!0,striped:!0,style:{width:"100%"},children:[Object(c.jsx)("thead",{children:Object.keys(t).map((function(e){return Object(c.jsx)("th",{children:e})}))}),Object(c.jsx)("tbody",{children:Object.keys(t).map((function(e){return Object(c.jsx)("tr",{children:t[e].map((function(e){return Object(c.jsx)("td",{children:e})}))})}))})]})})},U=(n(143),function(e){var t=e.node,n=r.a.useContext(g),o=n.nodes,i=n.importedNodes,a=n.setNodes,s=n.deleteNode,d=n.copyNode,j=n.references,f=r.a.useContext(u).setFocus,h=r.a.useState(!1),x=Object(l.a)(h,2),m=x[0],p=x[1],y=r.a.useMemo((function(){return Object.keys(i).indexOf(t)>=0}),[t,i]),v=r.a.useState(!1),C=Object(l.a)(v,2),w=C[0],k=C[1];return Object(c.jsxs)(c.Fragment,{children:[y?Object(c.jsx)("div",{style:{width:"100%",padding:"8px",textAlign:"center"},children:Object(c.jsx)(N.i,{icon:"lock",iconSize:32})}):Object(c.jsx)(c.Fragment,{}),Object(c.jsxs)("div",{className:"bp3-dark nguml-context-menu",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(c.jsx)(N.a,{className:"bp3-dark",intent:"danger",confirmButtonText:"Yes",icon:"delete",cancelButtonText:"No",isOpen:w,onClose:function(){return k(!1)},onConfirm:function(){f(void 0),s(t)},children:"Are you sure you want to delete the connection, this is an irreversible action."}),Object(c.jsxs)(N.c,{large:!0,fill:!0,children:[Object(c.jsx)(N.b,{icon:"duplicate",onClick:function(){d(t)}}),Object(c.jsx)(N.b,{icon:"trash",onClick:function(){return k(!0)},disabled:y}),Object(c.jsx)(N.b,{icon:"cube",disabled:!Object.keys(o[t].instances).length,onClick:function(){p(!0)}}),Object(c.jsx)(N.e,{usePortal:!0,className:"bp3-dark",portalClassName:"nguml-overlay",position:"bottom",portalContainer:j.root.current,onClose:function(){return p(!1)},isOpen:m,title:"Instances / Items in Class",children:Object(c.jsx)(q,{instances:o[t].instances})})]}),Object(c.jsx)(N.f,{value:o[t].name,onChange:function(e){a(Object(O.a)(Object(O.a)({},o),{},Object(b.a)({},t,Object(O.a)(Object(O.a)({},o[t]),{},{name:e}))))},maxLength:64,className:"nguml-class-menu-title",disabled:y}),Object(c.jsx)(P,{node:t}),Object(c.jsx)(D,{node:t}),Object(c.jsx)(Y,{node:t})]})]})}),G=(n(144),function(e,t){return e&&t?"Class"===e.type?Object(c.jsx)(U,{node:t}):(e.type,Object(c.jsx)("div",{style:{color:"red",textAlign:"center",padding:16},children:"Context Menu not Implemented!"})):Object(c.jsx)(c.Fragment,{})}),X=function(){var e=r.a.useContext(u).focus,t=r.a.useContext(g).nodes;return Object(c.jsx)(A.a,{expanded:!!e,style:{overflowY:"auto"},children:G(t[e],e)})},Z=n(163),K=n(164),V=n(167),$=n(169),Q=n(165),_=(n(145),function(e){var t=r.a.useContext(g).addNode;return Object(c.jsx)(Z.a,{isRail:!0,expanded:!1,isChildOfHeader:!1,"aria-label":"Side navigation",children:Object(c.jsx)(K.a,{className:"nguml-nodemenu",children:Object(c.jsxs)(V.a,{renderIcon:Q.a,title:"Add",defaultExpanded:!0,children:[Object(c.jsx)($.a,{onClick:function(){return t("Class")},children:"Class"}),Object(c.jsx)($.a,{onClick:function(){return t("Enum")},children:"Enum"})]})})})}),ee=function(e){var t=e.node;return Object(c.jsx)("div",{children:t.name})},te=function(e){var t=e.node;return"Class"===t.type?Object(c.jsx)(W,{node:t}):"Enum"===t.type?Object(c.jsx)(ee,{node:t}):Object(c.jsxs)("div",{children:[t.type," not implemented"]})},ne=n(50),ce=n.n(ne),oe=(n(149),function(e){var t=e.node,n=r.a.useContext(u),o=n.setPanning,i=n.setFocus,a=n.setRedraw,s=r.a.useContext(g),l=s.nodes,d=s.moveNode,j=s.references,b=s.addRef,O=r.a.useRef(null);return r.a.useEffect((function(){j[t]||b(t,O),j[t]&&!j[t].current&&b(t,O)})),Object(c.jsx)(ce.a,{nodeRef:O,grid:[8,8],position:l[t].position,onStop:function(e,n){var c=n.lastX,o=n.lastY;d(t,c,o),setTimeout((function(){return i(t)}),1)},onStart:function(){o(!1),i(void 0)},onDrag:function(){setTimeout((function(){return a((new Date).getTime())}),15)},children:Object(c.jsx)("div",{className:"nguml-diagram-node",id:"nodeRef-"+t,onMouseEnter:function(){return o(!1)},onMouseOut:function(){return o(!0)},onClick:function(){i(t)},tabIndex:0,ref:O,children:Object(c.jsx)(te,{node:l[t]})})})}),re=function(){var e=r.a.useContext(g),t=e.nodes,n=e.references,o=(e.layout,e.addRef),i=r.a.useRef(null);return r.a.useEffect((function(){n.grid&&n.grid.current||o("grid",i)})),Object(c.jsx)("div",{ref:i,children:Object.keys(t).map((function(e,t){return Object(c.jsx)(oe,{node:e},e)}))})},ie=function(e,t){return{top:e.top-t.top,bottom:e.top+e.height-t.top,left:e.left-t.left,right:e.left+e.width-t.left}},ae=function(e,t,n,c){return 0===n?{x:e.left-t.x+e.width/2+16*c,y:e.top-t.y}:1===n?{x:e.left-t.x,y:e.bottom-t.y-e.height/2+16*c}:2===n?{x:e.left-t.x+e.width/2+16*c,y:e.bottom-t.y}:{x:e.right-t.x,y:e.top-t.y+e.height/2+16*c}},se=function(e){var t=function(e,t,n,c){var o=ie(e,n),r=ie(t,n),i=[r.top-o.bottom,r.left-o.right,o.top-r.bottom,o.left-r.right],a=i.indexOf(Math.max.apply(Math,i));return{from:ae(e,n,(a+2)%4,c),to:ae(t,n,a,c),fromOrientation:(a+2)%4,toOrientation:a}}(e.fromRect,e.toRect,e.gridRect,e.offset),n=function(e){return(180*Math.atan2(e.from.y-e.to.y,e.from.x-e.to.x)/Math.PI-180)%360}(t),c=function(e){return Math.hypot(e.to.x-e.from.x,e.to.y-e.from.y)}(t);return Object(O.a)(Object(O.a)({},t),{},{length:c,arrowDirection:n})},le={fontSize:10,height:"16px",verticalAlign:"middle",lineHeight:"16px",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:"bolder",overflow:"hidden",background:"white"},de={display:"inline-block",verticalAlign:"middle",backgroundColor:"white",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},je={position:"absolute",height:16,overflow:"hidden",transformOrigin:"left",display:"flex",justifyContent:"space-between",alignContent:"space-between"},ue={position:"absolute",width:16,height:16,overflow:"hidden"},be=function(e){var t=e.fromRef,n=e.toRef,o=e.gridRef,r=e.fromLabel,i=e.toLabel,a=e.label,s=e.fromArrowHead,l=e.toArrowHead,d=e.offset;if(t&&n&&o&&t.current&&n.current&&o.current){var j=t.current.getBoundingClientRect(),u=n.current.getBoundingClientRect(),b=o.current.getBoundingClientRect(),f=se({fromRect:j,toRect:u,gridRect:b,offset:d}),h=function(){return f.arrowDirection<-90&&f.arrowDirection>-270?{transform:"scaleX(-1) scaleY(-1)"}:{}},x="";return x+=" M "+f.from.x+", "+f.from.y,x+=" L "+f.to.x+", "+f.to.y,Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("g",{children:[Object(c.jsx)("path",{stroke:"black",d:x,transform:"translate("+b.x+", "+b.y+")"}),Object(c.jsx)("foreignObject",{style:{position:"absolute",zIndex:-2,width:"100vw",height:"100vh"},children:Object(c.jsxs)("div",{style:Object(O.a)(Object(O.a)({},je),{},{left:f.from.x+b.x,top:f.from.y+b.y-8,width:f.length,transform:"rotate("+f.arrowDirection+"deg)",paddingLeft:s?24:8,paddingRight:l?24:8}),children:[Object(c.jsx)("div",{style:Object(O.a)(Object(O.a)({},ue),{},{left:0}),children:s}),Object(c.jsx)("div",{style:Object(O.a)(Object(O.a)({},ue),{},{right:0}),children:l}),Object(c.jsx)("span",{style:Object(O.a)(Object(O.a)({},le),h()),children:null!==r&&void 0!==r?r:""}),Object(c.jsx)("span",{style:Object(O.a)(Object(O.a)({},de),h()),children:null!==a&&void 0!==a?a:""}),Object(c.jsx)("span",{style:Object(O.a)(Object(O.a)({},le),h()),children:null!==i&&void 0!==i?i:""})]})})]})})}return Object(c.jsx)(c.Fragment,{})},Oe=function(){var e=r.a.useContext(g),t=e.connections,n=e.references,o=e.forceRefresh,i=r.a.useContext(u).redraw;r.a.useEffect((function(){b(i+o)}),[i,o]);var a=function(e){var t={};return Object.keys(e).forEach((function(n){var c=[e[n].from,e[n].to].sort();t[c[0]]?t[c[0]].push(n):t[c[0]]=[n]})),t}(t),s=r.a.useState(0),d=Object(l.a)(s,2),j=d[0],b=d[1];return Object(c.jsxs)("svg",{style:{zIndex:-2,position:"absolute",width:"100vw",height:"100vh"},children:[Object(c.jsx)("g",{children:Object(c.jsx)("text",{visibility:0,children:j})}),Object.keys(a).map((function(e){return Object.keys(a[e]).map((function(o,r){var i=t[a[e][r]],s={key:a[e][r],fromRef:n[i.from],toRef:n[i.to],gridRef:n.grid,label:i.label,fromLabel:i.labelFrom,toLabel:i.labelTo,offset:r%2?-Math.ceil(r/2):Math.ceil(r/2)};return"generalization"===i.type?Object(c.jsx)(be,Object(O.a)(Object(O.a)({},s),{},{fromLabel:"",toLabel:"",toArrowHead:Object(c.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:Object(c.jsx)("path",{d:"M 1, 16 L 1, 1 L 16, 8 L 1, 16 Z",stroke:"black",fill:"white"})})})):"association"===i.type?Object(c.jsx)(be,Object(O.a)({},s)):"composition"===i.type?Object(c.jsx)(be,Object(O.a)(Object(O.a)({},s),{},{fromArrowHead:Object(c.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:Object(c.jsx)("path",{d:"M 1, 8 L 8, 1 L 16, 8 L 8, 16 Z",stroke:"black",fill:"black"})})})):Object(c.jsx)(be,Object(O.a)({},s))}))}))]})},fe=n(31),he=n(170),xe=(n(150),function(){var e=r.a.useContext(u),t=e.panning,n=e.setFocus,o=e.setRedraw,i=r.a.useContext(g).layout;return Object(c.jsxs)(c.Fragment,{children:[i?Object(c.jsx)(he.a,{}):Object(c.jsx)(c.Fragment,{}),Object(c.jsx)("div",{onClick:function(){t&&n(void 0)},className:"nguml-canvas",children:Object(c.jsx)(fe.b,{options:{limitToBounds:!1,minScale:1,maxScale:1},pan:{disabled:!t},onPanning:function(){return o((new Date).getTime())},children:Object(c.jsx)(fe.a,{children:Object(c.jsx)("div",{style:{width:"100vw",height:"100vh"},children:Object(c.jsx)(re,{})})})})}),Object(c.jsx)(Oe,{})]})});n(151);a.a.render(Object(c.jsxs)(r.a.StrictMode,{children:[Object(c.jsx)(y,{})," "]}),document.getElementById("root")),s()}},[[152,1,2]]]);
//# sourceMappingURL=main.322890d7.chunk.js.map
